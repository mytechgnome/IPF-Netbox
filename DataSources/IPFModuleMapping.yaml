version: 1
schema: ipf-netbox-module-mapping
globals:
  prefix_map:
    Te: TenGigabitEthernet
    Gi: GigabitEthernet
    Hu: HundredGigE
    Twe: TwentyFiveGigE
    Eth: Ethernet
    Ethernet: Ethernet
    TenGigabitEthernet: TenGigabitEthernet
    GigabitEthernet: GigabitEthernet
    HundredGigE: HundredGigE
    TwentyFiveGigE: TwentyFiveGigE
  transforms:
    - regex: '^\s*Switch\s*\d+\s*[- ]\s*'
      replace: ''
    - regex: '\s+'
      replace: ' '
    - regex: 'PSU[-\s]?'
      replace: 'PSU'
    - regex: 'PS[-\s]?'
      replace: 'PS'
    # C9500 wording
    - regex: 'Power\s*Supply\s*Module\s*'
      replace: 'Power Supply '
    # zero-indexed fan trays
    - regex: 'Fan\s*Tray\s*0'
      replace: 'Fan 1'
  # Keep variants exact unless you add entries here:
  pid_aliases: {}
  # Fallbacks only when PID is missing/Unspecified
  dscr_to_pid:
    '1000BaseSX SFP': GLC-SX-MMD
    '1000BaseLX SFP': GLC-LH-SMD
    '1000BaseT': GLC-TE
    'SFP-10GBase-LR': SFP-10G-LR
    'SFP-10GBase-SR': SFP-10G-SR
    'QSFP 40GE LR4': QSFP-40G-LR4
    'QSFP-40G-SR-BD': QSFP-40G-SR-BD

categories:
  power:
    keywords: [power, psu, supply]
    ipf_patterns:
      - '^(?:Power\s*Supply\s*)(?P<pos>[A-Za-z0-9]+)$'
      - '^(?:PSU)(?P<pos>[A-Za-z0-9]+)$'
      - '^(?:PS)(?P<pos>[A-Za-z0-9]+)$'
      - '^(?:Power\s*Supply\s*(?:Module\s*)?(?P<slot>\d+))$'
      - '^(?:Slot\s*(?P<slot>\d+))$'
    synonyms:
      - 'Power Supply {POS}'
      - 'PS-{POS}'
      - 'PS{POS}'
      - 'PSU-{POS}'
      - 'PSU{POS}'
      - 'Power Supply {SLOT}'
      - 'PS-{SLOT}'
      - 'PS{SLOT}'
      - 'PSU-{SLOT}'
      - 'PSU{SLOT}'
      - 'Power Supply Module {SLOT}'

  network:
    keywords: [uplink, network module, nm, fabric card, fab, fru]
    ipf_patterns:
      - '^(?:FRU\s*)?Uplink\s*Module\s*(?P<pos>\d+)$'
      - '^Network\s*Module\s*(?P<pos>\d+)$'
      - '^(?:Slot\s*(?P<slot>\d+))$'
    synonyms:
      - 'Uplink Module {POS}'
      - 'Network Module {POS}'
      - 'FRU Uplink Module {POS}'
      - 'Slot {SLOT}'
      - 'Fabric Module {SLOT}'

  fan:
    keywords: [fan, fan tray]
    ipf_patterns:
      - '^(?:Fan\s*(?P<num>\d+))$'
      - '^(?:Slot\s*(?P<slot>\d+))$'
    synonyms:
      - 'Fan {NUM}'
      - 'FAN {NUM}'
      - 'Slot {SLOT}'
      - 'Fan Module {NUM}'
      - 'Fan Tray {NUM}'

  supervisor:
    keywords: [supervisor, sup]
    ipf_patterns:
      - '^(?:Module\s*(?P<slot>\d+))$'
      - '^(?:Slot\s*(?P<slot>\d+))$'
    synonyms:
      - 'Supervisor {SLOT}'
      - 'Slot {SLOT}'
      - 'SUP {SLOT}'

  disk:
    keywords: [disk, ssd, hdd, hd, usbflash]
    ipf_patterns:
      - '^(?:Disk(?P<num>\d+)\s*SATA)$'
      - '^(?:HD(?P<num>\d+))$'
      - '^(?:usbflash(?P<num>\d+)(?:-\d+)?)$'
    synonyms:
      - 'Disk {NUM}'
      - 'Disk{NUM}'
      - 'HD {NUM}'
      - 'HD{NUM}'
      - 'USB Flash {NUM}'
      - 'USBFlash {NUM}'

  stack:
    keywords: [stack, stackwise, stackport]
    ipf_patterns:
      - '^(?:StackPort(?P<path>\d+(?:/\d+)+))$'
    synonyms:
      - 'StackPort{PATH}'
      - 'Stack Port {PATH}'

  sfp:
    keywords: [sfp, gbic, glc, qsfp, transceiver]
    ipf_patterns:
      - '^(?P<pfx>Te|Gi|Hu|Twe|Eth|Ethernet|TenGigabitEthernet|GigabitEthernet|HundredGigE|TwentyFiveGigE)(?P<path>\d+(?:/\d+)+)$'
      - '^(?:subslot\s*\d+/\d+\s*transceiver\s*(?P<num>\d+))$'
    synonyms:
      - '{CANON_PREFIX}{PATH}'
      - 'Ethernet{PATH}'
      - 'TenGigabitEthernet{PATH}'
      - 'GigabitEthernet{PATH}'
      - 'HundredGigE{PATH}'
      - 'TwentyFiveGigE{PATH}'